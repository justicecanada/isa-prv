@model VmParticipantsModal
@using Interview.Entities
@using Interview.UI.Models.Default
@inject IViewLocalizer localizer

@{

    List<RoleUser> candidateUsers = ViewBag.CandidateUsers;
    List<SelectListItem> candidateUsersItems = new List<SelectListItem>();
    candidateUsersItems.Add(new SelectListItem(localizer["PleaseSelect"].Value, ""));
    foreach (var candidateUser in candidateUsers)
    {
        candidateUsersItems.Add(new SelectListItem()
                {
                    Value = candidateUser.Id.ToString(),
                    Text = $"{candidateUser.UserFirstname} {candidateUser.UserLastname}"
                });
    }

    List<RoleUser> interviewerUsers = ViewBag.InterviewerUsers;
    List<SelectListItem> interviewerUsersItems = new List<SelectListItem>();
    interviewerUsersItems.Add(new SelectListItem(localizer["PleaseSelect"].Value, ""));
    foreach (var interviewerUser in interviewerUsers)
    {
        interviewerUsersItems.Add(new SelectListItem()
            {
                Value = interviewerUser.Id.ToString(),
                Text = $"{interviewerUser.UserFirstname} {interviewerUser.UserLastname}",
                //Selected = interviewerUser.UserId == Model.VmInterviewerUserIds.InterviewerUserId
            });
    }

    List<RoleUser> leadUsers = ViewBag.LeadUsers;
    List<SelectListItem> leadItems = new List<SelectListItem>();
    leadItems.Add(new SelectListItem(localizer["PleaseSelect"].Value, ""));
    foreach (var leadUser in leadUsers)
    {
        leadItems.Add(new SelectListItem()
                {
                    Value = leadUser.Id.ToString(),
                    Text = $"{leadUser.UserFirstname} {leadUser.UserLastname}"
                });
    }

}

<header class="modal-header">
    <h2 class="modal-title">@localizer["ModalTitle"]</h2>
</header>

<div class="modal-body">

    <form id="interviewForm" action="@Url.Action("ParticipantsModal", "Default")" method="post">

        @Html.EditorFor(x => x.CandidateUserId, "Question", new { inputControl = @Html.DropDownListFor(x => x.CandidateUserId, candidateUsersItems, new { @class = "form-control" }) })

        @Html.EditorFor(x => x.InterviewerUserIds, "Question", new { inputControl = @Html.DropDownListFor(x => x.InterviewerUserIds, interviewerUsersItems, new { @class = "form-control" }) })

        @Html.EditorFor(x => x.InterviewerLeadUserIds, "Question", new { inputControl = @Html.DropDownListFor(x => x.InterviewerLeadUserIds, leadItems, new { @class = "form-control" }) })

    </form>

    </div>

    <div class="modal-footer">
        <button id="btnParticipantsClose" title="Cancel" class="btn btn-secondary cancel ml-2">@localizer["Close"]</button>
        <input id="btnParticipantSave" type="submit" value="@localizer["Save"]" class="btn btn-primary" formaction="/Default/ParticipantsModal" />
    </div>

</div>
