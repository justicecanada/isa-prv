@model VmFilter
@using Interview.Entities
@using Interview.UI.Models.Dashboard
@using Interview.UI.Helpers
@inject IViewLocalizer localizer

@{

    ViewBag.Title = localizer["Title"].Value;

    List<Process> processes = ViewBag.ProcessesForDropdown;
    Guid? processId = ViewBag.ProcessId;

    List<SelectListItem> vmProcessItems = new List<SelectListItem>();
    vmProcessItems.Add(new SelectListItem() { Value = "", Text = localizer["AllProcesses"].Value, Selected = Model.ProcessId == null });
    foreach (var processItem in processes)
    {
        vmProcessItems.Add(new SelectListItem()
                {
                    Value = processItem.Id.ToString(),
                    Text = processItem.NoProcessus,
                    Selected = processItem.Id == Model.ProcessId
                });
    }

    var periodOfTimeItems = Html.GetEnumSelectList<VmPeriodOfTimeTypes>().ToList();
    periodOfTimeItems.Insert(0, new SelectListItem(localizer["PleaseSelect"].Value, ""));

}

<h1>@localizer["Title"]</h1>

<section class="panel panel-primary">
    <header class="panel-heading">
        <h5 class="panel-title">@localizer["DahboardFilters"]</h5>
    </header>
    <div class="panel-body">
        @using (Html.BeginForm("Filter", "Dashboard", null, FormMethod.Post, null, new { id = "formProcess" }))
        {

            @Html.AntiForgeryToken()

            <div class="row">
                <div class="col-md-4">
                    @Html.EditorFor(x => x.ProcessId, "Question", new { inputControl = @Html.DropDownList("ProcessId", vmProcessItems, new { @class = "form-control" }) })
                </div>
                <div class="col-md-2">
                    @Html.EditorFor(x => x.PeriodOfTimeType, "Question", new { inputControl = @Html.DropDownList("PeriodOfTimeType", periodOfTimeItems, new { @class = "form-control" }) })
                </div>
                <div class="col-md-3">
                    @Html.EditorFor(x => x.StartDate, "Question", new { inputControl = Html.JusDatePickerFor(x => x.StartDate, new { date = Model.StartDate }) })
                </div>
                <div class="col-md-3">
                    @Html.ActionLink(localizer["DontClickThisYet"].Value, "Index", "Processes", null, new { @class = "btn btn-default" })
                    <input type="submit" value="@localizer["Apply"]" id="btnSave" class="btn btn-primary mr-2" formmethod="post" />
                </div>
            </div>

            <div class="row">
                <div class="col-md-4">
                </div>
                <div class="col-md-2">
                </div>
                <div class="col-md-3">
                    @Html.EditorFor(x => x.EndDate, "Question", new { inputControl = Html.JusDatePickerFor(x => x.EndDate, new { date = Model.EndDate }) })
                </div>
                <div class="col-md-3">
                </div>
            </div>

        }
    </div>
</section>

@{
    await Html.RenderPartialAsync("InterviewsRowPartial");
}