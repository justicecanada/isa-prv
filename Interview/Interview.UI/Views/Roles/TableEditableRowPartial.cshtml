@model VmUserSetting
@using Interview.UI.Models
@inject IViewLocalizer localizer

@{

    string cultureName = System.Globalization.CultureInfo.CurrentCulture.Name;
    string userName = $"{Model.UserLastname}, {Model.UserFirstname}";

    List<VmRole> vmRoles =  ViewBag.VmRoles;
    List<SelectListItem> rolesItems = new List<SelectListItem>();
    foreach (var vmRole in vmRoles)
    {
        rolesItems.Add(new SelectListItem()
        {         
            Value = vmRole.Id.ToString(),
            Text = cultureName == Constants.EnglishCulture ? vmRole.RoleNameEN : vmRole.RoleNameFR
        });
    }

    List<VmUserLanguage> vmUserLanguages = ViewBag.VmUserLanguages;
    List<SelectListItem> userLanguageItems = new List<SelectListItem>();
    foreach (var vmUserLanguage in vmUserLanguages)
    {
        userLanguageItems.Add(new SelectListItem()
        {         
            Value = vmUserLanguage.Id.ToString(),
            Text = cultureName == Constants.EnglishCulture ? vmUserLanguage.NameEN : vmUserLanguage.NameFR
        });
    }

    bool showEquities = ViewBag.ShowEquities;

}

<tr>
    <form id="editForm" action="/Roles/UpdateUserSettings" method="post">
        @Html.HiddenFor(x => x.Id)
        @Html.AntiForgeryToken()
        <td>@userName</td>
        <td>@Html.DropDownList("RoleId", rolesItems, new { @class = "form-control" })</td>
        <td>@Html.DropDownList("UserLanguageId", userLanguageItems, new { @class = "form-control" })</td>
        @if (showEquities)
        {
            <td></td>
        }
        <td>
            <a href="@Url.Action("Index", "Roles")">
                <span class="glyphicon glyphicon-remove text-danger"></span>
            </a>
            <a id="aSubmit" href="@Url.Action("DeleteUserSetting", "Roles", new { userSettingsId = Model.Id } )">
                <span class="glyphicon glyphicon-ok text-success"></span>
            </a>
        </td>   
    </form>
</tr>