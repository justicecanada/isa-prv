
@using Interview.Entities
@inject IViewLocalizer localizer

@{

    List<UserSetting> userSettings = ViewBag.UserSettings;

    Guid? userSettingIdToUpdate = (Guid?)TempData["UserSettingIdToUpdate"];
    bool showEquities = ViewBag.ShowEquities;

}

@if (userSettings.Count == 0)
{
    <p>@localizer["NoRoles"]</p>
}
else
{
    <div class="table-responsive">
        <table id="userSettings" class="table table-striped" data-toggle="table" data-pagination="true">
            <thead>
                <tr>
                    <th>@localizer["UserName"]</th>
                    <th>@localizer["Role"]</th>
                    <th>@localizer["Language"]</th>
                    @if (showEquities)
                    {
                        <th>@localizer["Equities"]</th>
                    }
                    <th>@localizer["Action"]</th>
                </tr>
            </thead>
            <tbody>
                @foreach (UserSetting userSetting in userSettings)
                {
                    ViewBag.UserSetting = userSetting;
                    if (userSetting.Id == userSettingIdToUpdate)
                    {
                        await Html.RenderPartialAsync("TableEditableRowPartial");
                    }
                    else
                    {                   
                        await Html.RenderPartialAsync("TableReadonlyRowPartial");
                    }
                }
            </tbody>
        </table>
    </div>
}

@*<link href="~/lib/jquery-DataTables/datatables.min.css" rel="stylesheet" />
<script src="~/lib/jquery-DataTables/datatables.min.js"></script>
<script src="~/js/Roles/TablePartial.js" asp-append-version="true"></script>*@